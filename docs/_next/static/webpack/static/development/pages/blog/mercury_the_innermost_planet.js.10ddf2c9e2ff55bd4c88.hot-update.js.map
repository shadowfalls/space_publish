{"version":3,"file":"static/webpack/static/development/pages/blog/mercury_the_innermost_planet.js.10ddf2c9e2ff55bd4c88.hot-update.js","sources":["webpack:///./services/useBlogLoader.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Router from 'next/router';\n\nimport { isLocal } from '../constants/constants';\nimport { getArticleMap, getBlog, getDate, getRecentArticles } from './utils';\n\nexport default function useBlogLoader({\n    id,\n}) {\n    const [blog, setBlog] = useState({\n        title: '',\n        description: '',\n        categoryId: '',\n        readTimeMin: 0,\n        date: getDate(),\n        content: [],\n    });\n    const [recent, setRecent] = useState([]);\n\n    useEffect(() => {\n        if (!id) return;\n        let blogId = id;\n        if (isLocal) {\n            getArticleMap()\n                .then((data) => {\n                    blogId = data.articleNameMap[id];\n                    getBlog(blogId)\n                        .then((res) => {\n                            if (res) {\n                                const data = res.data && res.data.data ? res.data.data : (res.data ? res.data : {});\n                                setBlog({\n                                    content: data.content && data.content.length ? data.content : [],\n                                    title: data.title,\n                                    description: data.description,\n                                    date: getDate(data.date),\n                                    readTimeMin: data.readTimeMin,\n                                    categoryId: data.categoryId,\n                                });\n                            }\n                            window.scrollTo(0, 0);\n                        })\n                        .catch(() => {\n                            Router.push('/', '/', { shallow: false });\n                        });\n                })\n                .catch((err) => {\n                    const tr = err;\n                    debugger;\n                });\n\n        } else {\n            getBlog(id)\n                .then((res) => {\n                    if (res) {\n                        const data = res.data && res.data.data ? res.data.data : (res.data ? res.data : {});\n                        setBlog({\n                            content: data.content && data.content.length ? data.content : [],\n                            title: data.title,\n                            description: data.description,\n                            date: getDate(data.date),\n                            readTimeMin: data.readTimeMin,\n                            categoryId: data.categoryId,\n                        });\n                    }\n                    window.scrollTo(0, 0);\n                })\n                .catch(() => {\n                    Router.push('/', '/', { shallow: false });\n                });\n        }\n    }, [id]);\n\n    useEffect(() => {\n        getRecentArticles()\n            .then((res) => {\n                if (res) setRecent(res.data && res.data.length ? res.data : []);\n            })\n            .catch(() => {\n            });\n    }, []);\n\n    return {\n        blog,\n        recent,\n    };\n}"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAUA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAGA;AAEA;AACA;AACA;AAFA;AAIA;;;;A","sourceRoot":""}